# Updates

## 2025-10-08

## Updates, Major refactoring and new additions

Major progress has been made to the audio production tool these last couple days. First thing I decided to do was research qml practices and architecture to get a general idea of how I would want to layout the project directory. In doing so, I discovered MVVM architecture which stands for Model, View, View Model. This architecture describes how data should be represented for the user interface where Model represents the backend logic/data processing, view represents the UI and what the user sees, view model represents the intermediate betweeen the model and view, where it is able to store data that will be used for the UI, and send signals to the backend from the UI; that said, I'll be continuing with this architecture, but loosely since I still have much to learn about audio processing and Qml.

The next thing I completed was selecting and integrating other open source projects/tools for this one. They are as follows:

* TagLib: Open source project that provides efficient APIs for reading/writing meta data from/to audio files.
* libsndfile: Open source project for decoding various audio file formats.
* RtAudio: Open source project that provides low level APIs for communicating with device drivers
* Google Test: Open source framework that allows for easy, quick, and efficient testing

These projects were selected, so that I can focus on improving my skills with optimization and problem solving for real time systems with C++, digital signal processing, mathematics, and overall just learning how to build a large project to make music the way I see fit.

So where did Google Test come from? This tool was added to the project, so that I could take a test driven approach, and try out something new. By defining the tests ahead of time, this gives me more of measureable milestone to work towards and will hopefully keep me motivated to stay on track with the problem at hand. This also gives me a a chance to go through the whole SDLC (minus peer reviews) to better improve my skills for on-the-job-work.

The next task I completed was getting the project to build and run properly. The previous iteration of the project used one top level CMakeLists.txt file, which made it easy to add files, but not very easy to port over for larger projects like this that use Qml, so I decided to use subdirectories and libraries to build the project, which actually improved build times, since were building libraries, not the whole project.

Actual development for the project has started with the development of the thread safe queue implemented as a memory ordered circular buffer. In a real time system where ms precision timing really matters, I found that using locks was too slow and implementing a lock free, thread safe buffer is a common problem that other developers have come across. My solution (not tested yet and won't be for a while) was to make use of atomics and memory order, which should improve performance over locks, which shouldredue the time it takes to add/remove from the queue.

The same architecture from the widgets app (i.e. AudioEngine thread controlled by AudioController singleton) have begun, but with a few caveats; audio systems must not have any memory allocation/delocation during processing blocks, so the use of heap will be very mindful, the use of Qt modules will not be used for the core application containing the DSP.

More has been done for the project, but overall, still in the extreme early stages. I still have lots to learn about the audio programming, real time system optimization, qml, and just overall everything. The packages seem to all be in place, so now starts the real development!

## Next Milestone Goals

* Create worker thread relationship between engine and controller, using C++ native threading solutions
* Try out test driven development

## Backlog

* Create basic UI for a generic home page

## Future Plans

* NA
